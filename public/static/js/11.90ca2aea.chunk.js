(this.webpackJsonpmmmcrm=this.webpackJsonpmmmcrm||[]).push([[11],{406:function(e,t,a){},407:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(406);var n=a(2),c=function(e){var t=e.children;return Object(n.jsx)("div",{className:"navslide navwrap",id:"app_content_toolbar",children:Object(n.jsx)("div",{className:"ui menu icon borderless","data-color":"inverted white",style:{height:40},children:t})})}},408:function(e,t,a){"use strict";var n=a(11),c=a.n(n),r=a(21),i=a(44),s=a(0),o=a(412),l=a(24),d=a(112);t.a=function(e){var t=e.url,a=void 0===t?null:t,n=e.params,b=void 0===n?{}:n,j=e.take,h=void 0===j?20:j,O=Object(s.useState)({take:h,skip:0}),m=Object(i.a)(O,2),p=m[0],f=m[1],v=Object(s.useState)(function(){var e="".concat("http://objetosbim.sencico.gob.pe/api","/").concat(a),t=!1;return Object.keys(b).length>0&&(t=!0,Object.keys(b).forEach((function(t,a){e+=0===a?"?".concat(t,"=").concat(b[t],"&"):"".concat(t,"=").concat(b[t],"&")}))),t||(e+="?"),e}()),x=Object(i.a)(v,2),g=x[0],w=x[1],C=Object(s.useState)(),E=Object(i.a)(C,2),S=E[0],k=E[1],y=function(e){k(e)},N=Object(s.useRef)(""),I=Object(s.useRef)(""),D=Object(s.useRef)(null),R=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a,n,r,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],a=s.length>1&&void 0!==s[1]?s[1]:null,Object(o.d)(p)!==N.current||t){e.next=4;break}return e.abrupt("return");case 4:return I.current=Object(o.d)(p),e.prev=5,n="",(a||D.current)&&(a!==D.current&&a&&(D.current=a),n=u(D.current)),e.next=10,Object(d.a)({url:g+I.current+n,method:"GET"});case 10:r=e.sent,i=r.data,N.current=I.current,I.current="",Object(o.d)(p)===N.current?y.call(void 0,{data:i.body.data,total:i.body.count}):R(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),l.a.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){R()}),[p]),{dataResul:S,dataState:p,handleCustomSearch:function(e){if("Enter"===e.key){var t=e.target.value;R(!0,{search:t})}},setBaseUrl:w,setDataState:f,baseUrl:g,dataStateChange:function(e){f(e.dataState)},requestDataIfNeeded:R}};var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object.keys(e).length)return"";var t="";return Object.keys(e).forEach((function(a){t+="&$".concat(a,"=").concat(e[a],"&")})),t}},411:function(e,t,a){"use strict";var n=a(44),c=a(0);t.a=function(){var e=Object(c.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(n.a)(e,1)[0];return Object(c.useEffect)((function(){function e(){var e=document.querySelector(".k-widget.k-grid.grid"),t=window.innerHeight-90;e&&(e.style.height="".concat(t,"px"))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e())}}),[]),{width:t.width,height:t.height}}},428:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var n=a(11),c=a.n(n),r=a(21),i=a(44),s=a(407),o=a(408),l=a(384),d=a(401),u=a(32),b=a(0),j=a.n(b),h=a(13),O=a(12),m=a(402),p=a(400),f=a(403),v=a(398),x=a(232),g=a(182),w=a(88),C=a(25),E=a(125),S=a(26),k=a(2),y=function(e){var t=e.setOpenModal,a=e.editarOperador,n=e.reloadTable,s=Object(C.c)((function(e){return e.operadores})).operador,o=Object(C.b)(),u=Object(b.useRef)(null),j=Object(b.useState)(null),h=Object(i.a)(j,2),S=h[0],y=h[1],D=Object(g.a)({initialValues:a?Object(O.a)({},s):N(),validationSchema:w.b(I()),onSubmit:function(){var e=Object(r.a)(c.a.mark((function e(a){var r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("formEmpleado"),i=new FormData(r),s=null,!a.id){e.next=9;break}return e.next=6,o(Object(E.e)(a.id,i));case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,o(Object(E.a)(i));case 11:s=e.sent;case 12:s&&(n(!0),t(!1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(d.a.Header,{children:[a?"Editar":"Nuevo"," Operador"]}),Object(k.jsx)(d.a.Content,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(m.a.Column,{width:11,children:Object(k.jsxs)(p.a,{onSubmit:D.handleSubmit,id:"formEmpleado",children:[Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Input,{label:"Nombres",required:!0,width:7,name:"name",value:D.values.name,onChange:D.handleChange,error:D.errors.name}),Object(k.jsx)(p.a.Input,{label:"Apellidos",required:!0,width:7,name:"last_name",value:D.values.last_name,onChange:D.handleChange,error:D.errors.last_name})]}),Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Input,{label:"Tel\xe9fono",width:7,name:"phone",value:D.values.phone,onChange:D.handleChange,error:D.errors.phone}),Object(k.jsx)(p.a.Input,{label:"Ocupaci\xf3n",width:7,name:"occupation",value:D.values.occupation,onChange:D.handleChange,error:D.errors.occupation})]}),Object(k.jsx)(f.a,{as:"h3",children:"Datos de acceso"}),Object(k.jsx)(v.a,{}),Object(k.jsxs)(p.a.Group,{children:[Object(k.jsx)(p.a.Input,{label:"Correo",required:!a,width:7,name:"email",value:D.values.email,onChange:D.handleChange,error:D.errors.email}),Object(k.jsx)(p.a.Input,{type:"password",label:"".concat(a?"Nueva contrase\xf1a":"Contrase\xf1a"),required:!a,name:"password",value:D.values.password,onChange:D.handleChange,width:8})]}),Object(k.jsx)("input",{type:"file",style:{display:"none"},ref:u,name:"imageBim",onChange:function(e){var t=new FileReader;t.readAsDataURL(e.target.files[0]),D.setFieldValue("nuevaImg",e.target.files),t.onload=function(){y(t.result)}}})]})}),Object(k.jsxs)(m.a.Column,{width:5,children:[Object(k.jsx)(x.a,{className:"",size:"medium",src:"".concat(S||"".concat("http://objetosbim.sencico.gob.pe/public","/").concat(D.values.image)),wrapped:!0}),Object(k.jsx)(l.a,{color:"grey",style:{marginTop:10},onClick:function(){u.current.click()},children:"Click para seleccionar una imagen"})]})]})}),Object(k.jsxs)(d.a.Actions,{children:[Object(k.jsx)(l.a,{onClick:function(){return t(!1)},children:"Cancelar"}),Object(k.jsx)(l.a,{primary:!0,type:"submit",onClick:function(){return D.handleSubmit()},children:"Guardar"})]})]})},N=function(){return{id:"",name:"",last_name:"",occupation:"",email:"",password:""}},I=function(){return{name:w.d().required("Este campo es obligatorio"),last_name:w.d().required("Este campo es obligatorio"),email:w.d().email("Formato no correcto").required("Este campo es requerido.")}},D=a(414),R=a(399),_=a(124),q=function(e){var t=e.dataStateChange,a=e.dataState,n=e.dataResul,c=(e.requestDataIfNeeded,e.handleEliminar),r=e.handleEditar;return Object(k.jsxs)(D.a,Object(O.a)(Object(O.a)(Object(O.a)({sortable:!0,pageable:!0},a),n),{},{onDataStateChange:t,className:"grid",children:[Object(k.jsx)(D.b,{width:50,cell:function(e){var t=e.dataItem;return Object(k.jsx)("td",{style:{overflow:"inherit"},children:Object(k.jsx)(R.a,{icon:"ellipsis vertical",floating:!0,button:!0,className:"icon circular compact ui left pointing",children:Object(k.jsxs)(R.a.Menu,{children:[Object(k.jsx)(R.a.Item,{icon:"edit",className:"blue",text:"Editar",onClick:function(){return r(t.id)}}),Object(k.jsx)(R.a.Item,{icon:"delete",className:"red",text:"Eliminar",onClick:function(){return c(t.id)}})]})})})}}),Object(k.jsx)(D.b,{width:50,title:"ID",field:"id"}),Object(k.jsx)(D.b,{title:"IMAGEN",width:110,cell:function(e){var t=e.dataItem;return Object(k.jsx)("td",{children:Object(k.jsx)(x.a,{width:50,height:50,src:"".concat("http://objetosbim.sencico.gob.pe/public").concat(t.image)})})}}),Object(k.jsx)(D.b,{width:250,field:"name",title:"NOMBRES"}),Object(k.jsx)(D.b,{width:250,field:"last_name",title:"APELLIDOS"}),Object(k.jsx)(D.b,{width:300,field:"email",title:"EMAIL"}),Object(k.jsx)(D.b,{width:150,field:"phone",title:"TEL\xc9FONO"}),Object(k.jsx)(D.b,{width:200,field:"occupation",title:"OCUPACI\xd3N"}),Object(k.jsx)(D.b,{title:"ESTADO",width:120,cell:function(e){var t=e.dataItem;return Object(k.jsx)("td",{children:parseInt(t.status)===S.b?Object(k.jsx)(_.a,{color:"green",size:"tiny",children:"Activo"}):Object(k.jsx)(_.a,{color:"red",size:"tiny",children:"Inactivo"})})}})]}))},A=j.a.memo(q),L=a(411),T=function(){var e=Object(C.b)(),t=Object(o.a)({url:"users"}),a=t.dataResul,n=t.dataState,j=t.dataStateChange,O=(t.handleCustomSearch,t.requestDataIfNeeded),m=Object(b.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],x=Object(b.useState)(!1),g=Object(i.a)(x,2),w=g[0],S=g[1];Object(L.a)();var N=function(){var t=Object(r.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),h.Loading.pulse(),t.next=4,e(Object(E.c)(a));case 4:t.sent&&S(!0),h.Loading.remove();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"Operadores",children:[Object(k.jsxs)(s.a,{children:[Object(k.jsx)("div",{class:"item ui colhidden",children:Object(k.jsx)("button",{class:"ui icon button",onClick:function(){return O(!0)},children:Object(k.jsx)("i",{class:"sync icon"})})}),Object(k.jsx)("div",{className:"item ui colhidden",children:Object(k.jsx)("div",{className:"ui big breadcrumb",children:Object(k.jsx)("h2",{className:"section active",children:"OPERADORES"})})}),Object(k.jsx)("div",{className:"item ui colhidden",children:Object(k.jsxs)(l.a,{icon:!0,onClick:Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!1),h.Loading.pulse(),S(!0),h.Loading.remove();case 4:case"end":return e.stop()}}),e)}))),children:[Object(k.jsx)(u.h,{})," Nuevo operador"]})})]}),Object(k.jsx)("div",{className:"Operadores__body app__container_body",children:Object(k.jsx)("div",{className:"Operadores__tabla",children:Object(k.jsx)(A,{dataStateChange:j,dataState:n,dataResul:a,handleEditar:N,handleEliminar:function(t){h.Confirm.show("OPERADORES","\xbfDesea eliminar al operador ".concat(t,"?"),"Aceptar","Cancelar",(function(){e(Object(E.b)(t,O))}))},requestDataIfNeeded:O})})}),Object(k.jsx)(d.a,{open:w,children:w?Object(k.jsx)(y,{setOpenModal:S,editarOperador:f,reloadTable:O,open:w}):null})]})}}}]);
//# sourceMappingURL=11.90ca2aea.chunk.js.map