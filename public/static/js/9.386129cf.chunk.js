(this.webpackJsonpmmmcrm=this.webpackJsonpmmmcrm||[]).push([[9],{406:function(e,t,n){},407:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(406);var r=n(2),a=function(e){var t=e.children;return Object(r.jsx)("div",{className:"navslide navwrap",id:"app_content_toolbar",children:Object(r.jsx)("div",{className:"ui menu icon borderless","data-color":"inverted white",style:{height:40},children:t})})}},408:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(21),i=n(44),u=n(0),s=n(412),o=n(24),l=n(112);t.a=function(e){var t=e.url,n=void 0===t?null:t,r=e.params,b=void 0===r?{}:r,f=e.take,j=void 0===f?20:f,h=Object(u.useState)({take:j,skip:0}),p=Object(i.a)(h,2),v=p[0],O=p[1],m=Object(u.useState)(function(){var e="".concat("http://objetosbim.sencico.gob.pe/api","/").concat(n),t=!1;return Object.keys(b).length>0&&(t=!0,Object.keys(b).forEach((function(t,n){e+=0===n?"?".concat(t,"=").concat(b[t],"&"):"".concat(t,"=").concat(b[t],"&")}))),t||(e+="?"),e}()),x=Object(i.a)(m,2),w=x[0],g=x[1],k=Object(u.useState)(),S=Object(i.a)(k,2),y=S[0],N=S[1],C=function(e){N(e)},E=Object(u.useRef)(""),I=Object(u.useRef)(""),L=Object(u.useRef)(null),R=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c,i,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],n=u.length>1&&void 0!==u[1]?u[1]:null,Object(s.d)(v)!==E.current||t){e.next=4;break}return e.abrupt("return");case 4:return I.current=Object(s.d)(v),e.prev=5,r="",(n||L.current)&&(n!==L.current&&n&&(L.current=n),r=d(L.current)),e.next=10,Object(l.a)({url:w+I.current+r,method:"GET"});case 10:c=e.sent,i=c.data,E.current=I.current,I.current="",Object(s.d)(v)===E.current?C.call(void 0,{data:i.body.data,total:i.body.count}):R(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),o.a.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){R()}),[v]),{dataResul:y,dataState:v,handleCustomSearch:function(e){if("Enter"===e.key){var t=e.target.value;R(!0,{search:t})}},setBaseUrl:g,setDataState:O,baseUrl:w,dataStateChange:function(e){O(e.dataState)},requestDataIfNeeded:R}};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object.keys(e).length)return"";var t="";return Object.keys(e).forEach((function(n){t+="&$".concat(n,"=").concat(e[n],"&")})),t}},410:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return j}));var r=n(11),a=n.n(r),c=n(21),i=n(13),u=n(31),s=n(26),o=n(24),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/section/".concat(t));case 3:if((n=e.sent).data.status!==s.a){e.next=8;break}return e.abrupt("return",n.data.body);case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/section",t);case 3:if((n=e.sent).data.status!==s.a){e.next=9;break}return i.Notify.success("Se creo correctamente."),e.abrupt("return",!0);case 9:return n.data.msg?o.a.error(null,n.data.msg):o.a.error("Opps... hubo un error inesperador."),e.abrupt("return",!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),o.a.error(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.put("/section/".concat(t),n);case 3:if((r=e.sent).data.status!==s.a){e.next=9;break}return i.Notify.success("Se edit\xf3 correctamente."),e.abrupt("return",!0);case 9:return r.data.msg?o.a.error(null,r.data.msg):o.a.error("Opps... hubo un error inesperador."),e.abrupt("return",!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),o.a.error(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.delete("/section/".concat(t));case 3:if(e.sent.data.status!==s.a){e.next=7;break}return o.a.success(null,"Se elimino correctamente."),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(0),o.a.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/sections");case 3:(n=e.sent).data.status===s.a?t(n.data.body.data):t(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},411:function(e,t,n){"use strict";var r=n(44),a=n(0);t.a=function(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(r.a)(e,1)[0];return Object(a.useEffect)((function(){function e(){var e=document.querySelector(".k-widget.k-grid.grid"),t=window.innerHeight-90;e&&(e.style.height="".concat(t,"px"))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e())}}),[]),{width:t.width,height:t.height}}},416:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(12),a=n(126),c=n(401),i=n(2),u=["title","children","size","actions","show","setShow"],s=function(e){var t=e.title,n=void 0===t?"":t,s=e.children,o=e.size,l=void 0===o?"small":o,d=e.actions,b=e.show,f=void 0!==b&&b,j=(e.setShow,Object(a.a)(e,u));return Object(i.jsxs)(c.a,Object(r.a)(Object(r.a)({open:f,size:l},j),{},{children:[Object(i.jsx)(c.a.Header,{children:n}),Object(i.jsx)(c.a.Content,{children:s}),d&&Object(i.jsx)(c.a.Actions,{children:d})]}))}},431:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var r=n(12),a=n(11),c=n.n(a),i=n(21),u=n(44),s=n(407),o=n(416),l=n(32),d=n(384),b=n(399),f=n(0),j=n(408),h=n(414),p=n(13),v=n(411),O=n(182),m=n(400),x=n(88),w=n(410),g=n(2),k=Object(f.forwardRef)((function(e,t){var n=e.setShow,r=e.loadDataTable,a=e.id,u=Object(O.a)({initialValues:{name:""},validationSchema:x.b({name:x.d().required("Este campo es requerido.")}),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.Loading.pulse(),i=null,!a){e.next=8;break}return e.next=5,Object(w.e)(a,t);case 5:i=e.sent,e.next=11;break;case 8:return e.next=10,Object(w.a)(t);case 10:i=e.sent;case 11:if(!i){e.next=15;break}return n(!1),r(!0),e.abrupt("return");case 15:p.Loading.remove();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});Object(f.useImperativeHandle)(t,(function(){return{handleSubmit:function(){u.submitForm()}}}));var s=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.Loading.pulse(),e.next=3,Object(w.c)(a);case 3:(t=e.sent)?u.setValues(t):p.Notify.failure("No se encontro la secci\xf3n"),p.Loading.remove();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){a&&s()}),[a]),Object(g.jsx)(m.a,{onSubmit:u.handleSubmit,children:Object(g.jsx)(m.a.Group,{widths:"equal",children:Object(g.jsx)(m.a.Input,{label:"Nombre",name:"name",required:!0,value:u.values.name,error:u.errors.name,onChange:u.handleChange})})})})),S=k,y=function(){var e=Object(j.a)({url:"sections"}),t=e.dataResul,n=e.dataState,a=e.dataStateChange,O=e.requestDataIfNeeded,m=Object(f.useState)(null),x=Object(u.a)(m,2),k=x[0],y=x[1],N=Object(f.useState)(!1),C=Object(u.a)(N,2),E=C[0],I=C[1],L=Object(f.useRef)();Object(v.a)();return Object(g.jsxs)("div",{className:"Sections",children:[Object(g.jsxs)(s.a,{children:[Object(g.jsx)("div",{class:"item ui colhidden",children:Object(g.jsx)("button",{class:"ui icon button",onClick:function(){return O(!0)},children:Object(g.jsx)("i",{class:"sync icon"})})}),Object(g.jsx)("div",{className:"item ui colhidden",children:Object(g.jsx)("div",{className:"ui big breadcrumb",children:Object(g.jsx)("h2",{className:"section active",children:"SECCIONES"})})}),Object(g.jsx)("div",{className:"item ui colhidden",children:Object(g.jsxs)(d.a,{onClick:function(){y(null),I(!0)},className:"ui button",children:[Object(g.jsx)(l.h,{})," Nueva secci\xf3n"]})})]}),Object(g.jsx)("div",{className:"Sections__body app__container_body",children:Object(g.jsx)("div",{className:"Sections__tabla",children:Object(g.jsxs)(h.a,Object(r.a)(Object(r.a)(Object(r.a)({sortable:!0,pageable:!0},n),t),{},{onDataStateChange:a,className:"grid",children:[Object(g.jsx)(h.b,{width:50,cell:function(e){var t=e.dataItem;return Object(g.jsx)("td",{style:{overflow:"inherit"},children:Object(g.jsx)(b.a,{icon:"ellipsis vertical",floating:!0,button:!0,className:"icon circular compact ui left pointing",children:Object(g.jsxs)(b.a.Menu,{children:[Object(g.jsx)(b.a.Item,{icon:"edit",className:"blue",text:"Editar",onClick:function(){return e=t.id,y(e),void I(!0);var e}}),Object(g.jsx)(b.a.Item,{icon:"delete",className:"red",text:"Eliminar",onClick:function(){return e=t.id,n=t.name,void p.Confirm.show("SECCIONES","\xbfDesea eliminar a la secci\xf3n ".concat(n,"?"),"Aceptar","Cancelar",Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p.Loading.pulse(),t.next=3,Object(w.b)(e);case 3:if(!t.sent){t.next=7;break}return O(!0),t.abrupt("return");case 7:p.Loading.remove();case 8:case"end":return t.stop()}}),t)}))));var e,n}})]})})})}}),Object(g.jsx)(h.b,{width:100,title:"ID",field:"id"}),Object(g.jsx)(h.b,{field:"name",title:"NOMBRES"}),Object(g.jsx)(h.b,{field:"slug",title:"URL"})]}))})}),Object(g.jsx)(o.a,{title:"Ficha secci\xf3n",show:E,size:"mini",actions:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{onClick:function(){return I(!1)},children:"Cancelar"}),Object(g.jsx)(d.a,{primary:!0,onClick:function(){return L.current.handleSubmit()},children:"Guardar"})]}),children:Object(g.jsx)(S,{ref:L,setShow:I,loadDataTable:O,id:k})})]})}}}]);
//# sourceMappingURL=9.386129cf.chunk.js.map