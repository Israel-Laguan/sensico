(this.webpackJsonpmmmcrm=this.webpackJsonpmmmcrm||[]).push([[10],{406:function(e,t,n){},407:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(406);var r=n(2),a=function(e){var t=e.children;return Object(r.jsx)("div",{className:"navslide navwrap",id:"app_content_toolbar",children:Object(r.jsx)("div",{className:"ui menu icon borderless","data-color":"inverted white",style:{height:40},children:t})})}},408:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(21),i=n(44),s=n(0),u=n(412),o=n(24),l=n(112);t.a=function(e){var t=e.url,n=void 0===t?null:t,r=e.params,b=void 0===r?{}:r,j=e.take,p=void 0===j?20:j,h=Object(s.useState)({take:p,skip:0}),m=Object(i.a)(h,2),O=m[0],f=m[1],v=Object(s.useState)(function(){var e="".concat("http://objetosbim.sencico.gob.pe/api","/").concat(n),t=!1;return Object.keys(b).length>0&&(t=!0,Object.keys(b).forEach((function(t,n){e+=0===n?"?".concat(t,"=").concat(b[t],"&"):"".concat(t,"=").concat(b[t],"&")}))),t||(e+="?"),e}()),x=Object(i.a)(v,2),E=x[0],w=x[1],C=Object(s.useState)(),g=Object(i.a)(C,2),y=g[0],I=g[1],k=function(e){I(e)},N=Object(s.useRef)(""),_=Object(s.useRef)(""),T=Object(s.useRef)(null),L=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c,i,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],n=s.length>1&&void 0!==s[1]?s[1]:null,Object(u.d)(O)!==N.current||t){e.next=4;break}return e.abrupt("return");case 4:return _.current=Object(u.d)(O),e.prev=5,r="",(n||T.current)&&(n!==T.current&&n&&(T.current=n),r=d(T.current)),e.next=10,Object(l.a)({url:E+_.current+r,method:"GET"});case 10:c=e.sent,i=c.data,N.current=_.current,_.current="",Object(u.d)(O)===N.current?k.call(void 0,{data:i.body.data,total:i.body.count}):L(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),o.a.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){L()}),[O]),{dataResul:y,dataState:O,handleCustomSearch:function(e){if("Enter"===e.key){var t=e.target.value;L(!0,{search:t})}},setBaseUrl:w,setDataState:f,baseUrl:E,dataStateChange:function(e){f(e.dataState)},requestDataIfNeeded:L}};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object.keys(e).length)return"";var t="";return Object.keys(e).forEach((function(n){t+="&$".concat(n,"=").concat(e[n],"&")})),t}},411:function(e,t,n){"use strict";var r=n(44),a=n(0);t.a=function(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(r.a)(e,1)[0];return Object(a.useEffect)((function(){function e(){var e=document.querySelector(".k-widget.k-grid.grid"),t=window.innerHeight-90;e&&(e.style.height="".concat(t,"px"))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e())}}),[]),{width:t.width,height:t.height}}},417:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n(11),a=n.n(r),c=n(21),i=n(13),s=n(31),u=n(26),o=n(112),l=n(24),d=n(9),b=function(){return new Promise(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/customers");case 3:(n=e.sent).data.status===u.a?t(n.data.body):(l.a.error(null,n.data.message),t([])),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),l.a.error(e.t0),t([]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:d.b.ADD_CLIENTE}),t.prev=1,t.next=4,Object(o.a)({url:"/customer",body:e,method:"POST"});case 4:if((r=t.sent).data.status!==u.a){t.next=11;break}return n({type:d.b.ADD_CLIENTE_OK}),i.Notify.success("Se creo un nuevo cliente"),t.abrupt("return",!0);case 11:return n({type:d.b.ADD_CLIENTE_ERROR}),l.a.error(null,r.data.message),t.abrupt("return",!1);case 14:t.next=21;break;case 16:return t.prev=16,t.t0=t.catch(1),n({type:d.b.ADD_CLIENTE_ERROR}),l.a.error(t.t0),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:d.b.UPDATE_CLIENTE}),n.prev=1,n.next=4,Object(o.a)({url:"/customer/".concat(e),body:t,method:"POST"});case 4:if((c=n.sent).data.status!==u.a){n.next=11;break}return r({type:d.b.UPDATE_CLIENTE_OK}),i.Notify.success("Se actualizo correctamente"),n.abrupt("return",!0);case 11:return r({type:d.b.UPDATE_CLIENTE_FAIL}),l.a.error(null,c.data.message),n.abrupt("return",!1);case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n.catch(1),r({type:d.b.UPDATE_CLIENTE_FAIL}),l.a.error(n.t0),n.abrupt("return",!1);case 21:case"end":return n.stop()}}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:d.b.GET_CLIENTE}),t.prev=1,t.next=4,Object(o.a)({url:"/customer/".concat(e),method:"GET"});case 4:if((r=t.sent).data.status!==u.a){t.next=10;break}return n({type:d.b.GET_CLIENTE_OK,value:r.data.body}),t.abrupt("return",!0);case 10:return n({type:d.b.GET_CLIENTE_FAIL}),l.a.error(null,r.data.message),t.abrupt("return",!1);case 13:t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(1),n({type:d.b.GET_CLIENTE_FAIL}),l.a.error(t.t0),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:d.b.DELETE_CLIETE}),t.prev=1,t.next=4,Object(o.a)({url:"/customer/".concat(e),method:"DELETE"});case 4:if(t.sent.data.status!==u.a){t.next=11;break}return n({type:d.b.DELETE_CLIENTE_OK}),l.a.success("Se elimino el cliente correctamente."),t.abrupt("return",!0);case 11:return n({type:d.b.DELETE_CLIENTE_FAIL}),l.a.error(null,l.a.data.message),t.abrupt("return",!1);case 14:t.next=21;break;case 16:return t.prev=16,t.t0=t.catch(1),n({type:d.b.DELETE_CLIENTE_FAIL}),l.a.error(t.t0),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}},429:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(12),a=n(11),c=n.n(a),i=n(21),s=n(44),u=n(407),o=n(414),l=n(384),d=n(399),b=n(232),j=n(124),p=n(401),h=n(32),m=n(408),O=n(402),f=n(400),v=n(403),x=n(398),E=n(0),w=n(2),C=function(e){var t=e.formik,n=Object(E.useState)(null),r=Object(s.a)(n,2),a=r[0],c=r[1],i=Object(E.useRef)(null);return Object(w.jsxs)(O.a,{children:[Object(w.jsx)(O.a.Column,{width:11,children:Object(w.jsxs)(f.a,{id:"form-cliente",children:[Object(w.jsxs)(f.a.Group,{children:[Object(w.jsx)(f.a.Input,{label:"Nombres",required:!0,width:7,name:"name",value:t.values.name,onChange:t.handleChange,error:t.errors.name}),Object(w.jsx)(f.a.Input,{label:"Apellidos",required:!0,width:8,name:"last_name",value:t.values.last_name,onChange:t.handleChange,error:t.errors.last_name})]}),Object(w.jsxs)(f.a.Group,{children:[Object(w.jsx)(f.a.Input,{label:"Tel\xe9fono",required:!0,width:7,name:"phone",value:t.values.phone,onChange:t.handleChange,error:t.errors.phone}),Object(w.jsx)(f.a.Input,{label:"Compa\xf1\xeda",width:5,name:"company",value:t.values.company,onChange:t.handleChange,error:t.errors.company}),Object(w.jsx)(f.a.Input,{label:"Pa\xeds",width:3,name:"country",value:t.values.country,onChange:t.handleChange,error:t.errors.country})]}),Object(w.jsx)(f.a.Group,{children:Object(w.jsx)(f.a.Input,{label:"Ocupaci\xf3n",width:15,name:"occupation",value:t.values.occupation,onChange:t.handleChange,error:t.errors.occupation})}),Object(w.jsx)(v.a,{as:"h3",children:"Datos usuario"}),Object(w.jsx)(x.a,{}),Object(w.jsxs)(f.a.Group,{children:[Object(w.jsx)(f.a.Input,{label:"Correo",required:!0,width:8,name:"email",value:t.values.email,onChange:t.handleChange,error:t.errors.email}),Object(w.jsx)(f.a.Input,{type:"password",label:"Contrase\xf1a",required:!0,width:8,name:"password",value:t.values.password,onChange:t.handleChange,error:t.errors.password})]}),Object(w.jsx)("input",{type:"hidden",name:"fechaNacimiento",value:"2021-10-05"}),Object(w.jsx)("input",{type:"file",style:{display:"none"},ref:i,name:"imageBim",onChange:function(e){var n=new FileReader;n.readAsDataURL(e.target.files[0]),t.setFieldValue("nuevaImg",e.target.files),n.onload=function(){c(n.result)}}})]})}),Object(w.jsxs)(O.a.Column,{width:5,children:[Object(w.jsx)(b.a,{className:"",size:"medium",src:"".concat(a||"".concat("http://objetosbim.sencico.gob.pe/public").concat(t.values.image)),wrapped:!0}),Object(w.jsx)(l.a,{color:"grey",style:{marginTop:10},onClick:function(){i.current.click()},children:"Click para seleccionar una imagen"})]})]})},g=n(182),y=n(88),I=n(417),k=n(25),N=function(e){var t=e.setOpenModal,n=e.requestDataIfNeeded,a=e.editarCliente,s=Object(k.b)(),u=Object(k.c)((function(e){return e.clientes})).cliente,o=Object(g.a)({initialValues:a?Object(r.a)(Object(r.a)({},u),{},{nuevoPassword:""}):_(),validationSchema:y.b(T(a)),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(r){var a,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById("form-cliente"),i=new FormData(a),u=null,r.id){e.next=9;break}return e.next=6,s(Object(I.a)(i));case 6:u=e.sent,e.next=12;break;case 9:return e.next=11,s(Object(I.e)(r.id,i));case 11:u=e.sent;case 12:u&&(t(!1),n(!0));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a.Header,{children:a?"Inspeccionar Cliente":"Nuevo Cliente"}),Object(w.jsx)(p.a.Content,{children:Object(w.jsx)(C,{formik:o,editarCliente:a})}),Object(w.jsxs)(p.a.Actions,{children:[Object(w.jsx)(l.a,{onClick:function(){return t(!1)},children:"Cancelar"}),Object(w.jsx)(l.a,{primary:!0,onClick:function(e){e.preventDefault(),o.submitForm()},children:"Guardar"})]})]})},_=function(){return{name:"",last_name:"",email:"",company:"",country:"",password:"",occupation:"",phone:""}},T=function(e){var t={name:y.d().required("Este campo es obligatorio"),last_name:y.d().required("Este campo es obligatorio"),company:y.d(),country:y.d(),occupation:y.d(),phone:y.a().positive("Solo n\xfameros positivos").required("Este campo es requerido").typeError("Solo se permiten n\xfameros"),email:y.d().email("Formato no correcto").required("Este campo es requerido."),password:y.d().required("Este campo es requerido")};return e&&(t.password=y.d()),t},L=n(13),D=n(411),S=n(26),A=function(){var e=Object(m.a)({url:"customers"}),t=e.dataResul,n=e.dataState,a=e.dataStateChange,O=e.requestDataIfNeeded,f=Object(E.useState)(!1),v=Object(s.a)(f,2),x=v[0],C=v[1],g=Object(E.useState)(!1),y=Object(s.a)(g,2),_=y[0],T=y[1],A=Object(k.b)();Object(D.a)();var q=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(Object(I.c)(t));case 2:e.sent&&(C(!0),T(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"Clientes",children:[Object(w.jsxs)(u.a,{children:[Object(w.jsx)("div",{class:"item ui colhidden",children:Object(w.jsx)("button",{class:"ui icon button",onClick:function(){return O(!0)},children:Object(w.jsx)("i",{class:"sync icon"})})}),Object(w.jsx)("div",{className:"item ui colhidden",children:Object(w.jsxs)("div",{className:"ui big breadcrumb",children:[Object(w.jsx)("i",{className:"right chevron icon divider"}),Object(w.jsx)("h2",{className:"section active",children:"CLIENTES"})]})}),Object(w.jsx)("div",{className:"item ui colhidden",children:Object(w.jsxs)(l.a,{icon:!0,onClick:function(){T(!0),C(!1)},children:[Object(w.jsx)(h.h,{})," Nuevo Cliente"]})})]}),Object(w.jsx)("div",{className:"Cliente__body app__container_body",children:Object(w.jsx)("div",{className:"Clientes__tabla",children:Object(w.jsxs)(o.a,Object(r.a)(Object(r.a)(Object(r.a)({sortable:!0,pageable:!0},n),t),{},{onDataStateChange:a,className:"grid",children:[Object(w.jsx)(o.b,{width:50,cell:function(e){var t=e.dataItem;return Object(w.jsx)("td",{style:{overflow:"inherit"},children:Object(w.jsx)(d.a,{icon:"ellipsis vertical",floating:!0,button:!0,className:"icon circular compact ui left pointing",children:Object(w.jsxs)(d.a.Menu,{children:[Object(w.jsx)(d.a.Item,{icon:"edit",className:"blue",text:"Editar",onClick:function(){return q(t.id)}}),Object(w.jsx)(d.a.Item,{icon:"delete",className:"red",text:"Eliminar",onClick:function(){return e=t.id,void L.Confirm.show("CLIENTES","\xbfDesea eliminar al cliente ".concat(e,"?"),"Aceptar","Cancelar",Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(Object(I.b)(e));case 2:t.sent&&O(!0);case 4:case"end":return t.stop()}}),t)}))));var e}})]})})})}}),Object(w.jsx)(o.b,{width:70,title:"ID",field:"id"}),Object(w.jsx)(o.b,{title:"IMAGEN",width:110,cell:function(e){var t=e.dataItem;return Object(w.jsx)("td",{children:Object(w.jsx)(b.a,{width:50,height:50,src:"".concat("http://objetosbim.sencico.gob.pe/public").concat(t.image)})})}}),Object(w.jsx)(o.b,{field:"name",width:250,title:"NOMBRES"}),Object(w.jsx)(o.b,{field:"last_name",width:250,title:"APELLIDOS"}),Object(w.jsx)(o.b,{field:"email",width:250,title:"CORREO"}),Object(w.jsx)(o.b,{field:"phone",width:200,title:"CELULAR"}),Object(w.jsx)(o.b,{field:"company",width:200,title:"COMPA\xd1IA"}),Object(w.jsx)(o.b,{title:"ESTADO",width:100,cell:function(e){var t=e.dataItem;return Object(w.jsx)("td",{children:parseInt(t.status)===S.b?Object(w.jsx)(j.a,{color:"green",size:"tiny",children:"Activo"}):Object(w.jsx)(j.a,{color:"red",size:"tiny",children:"Inactivo"})})}})]}))})}),Object(w.jsx)(p.a,{open:_,children:_&&Object(w.jsx)(N,{setOpenModal:T,requestDataIfNeeded:O,editarCliente:x})})]})}}}]);
//# sourceMappingURL=10.c123e547.chunk.js.map